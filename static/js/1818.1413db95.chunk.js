"use strict";(self.webpackChunkmmsp_land=self.webpackChunkmmsp_land||[]).push([[1818],{31818:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var i=s(72791),a=s(28979),r=s(87583),l=s(18661),o=s(21149),n=s(36801),c=s(59181),h=s(85113),d=s(86471),u=s(66683);class p extends d.c{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("width",100),t=this.get("height",100),s=this.get("gap",0),i=this.get("strokeWidth",1);if(s){let a=s+i,r=t/a;for(let t=-r;t<2*r;t++){const s=Math.round(t*a-a/2)+.5;this._display.moveTo(-e,s),this._display.lineTo(2*e,s)}}else this._display.moveTo(0,0),this._display.lineTo(e,0);this._display.lineStyle(i,this.get("color"),this.get("colorOpacity"));let a=this.get("strokeDasharray");u.hj(a)&&(a=a<.5?[0]:[a]),this._display.setLineDash(a);const r=this.get("strokeDashoffset");r&&this._display.setLineDashOffset(r),this._display.endStroke()}}Object.defineProperty(p,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinePattern"}),Object.defineProperty(p,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:d.c.classNames.concat([p.className])});var f=s(66817),g=s(36061),m=s(70565),v=s(54797),y=s(27663),b=s(82308),w=s(80659),_=s(91934),x=s(44520),j=s(80184);const k=(0,i.memo)((e=>{let{contractp:t,landtype:s,landsection:d,typelist:u}=e;const k=(0,i.useRef)({}),N=(0,i.useRef)({}),S=(0,i.useRef)({}),[A,L]=(0,i.useState)([{category:String,value:Number}]),T="structure-chart",[D,R]=(0,i.useState)([]),O=((0,i.useRef)({}),(0,i.useRef)({}),(0,i.useRef)({}),"Package = '"+t+"'"),C=O+" AND "+("Type = '"+s+"'"),F=C+" AND "+("Station1 ='"+d+"'");return a.UC.definitionExpression=t?!t||s||d?t&&s&&!d?C:F:O:"1=1",(0,i.useEffect)((()=>{(0,x.KD)().then((e=>{L(e)})),(0,x.fT)().then((e=>{R(e)}))}),[t,s,d]),(0,i.useEffect)((()=>{var e,t;class s extends h.Q{constructor(){super(...arguments),this.patterns=void 0,this.currentPattern=void 0}setupDefaultRules(){var e=this;const t=135,s=1.1,i=10,a=10;this.patterns=[p.new(this._root,{color:f.$_("#70AD47"),gap:4,rotation:t,strokeWidth:s,fillOpacity:0,width:i,height:a}),p.new(this._root,{color:f.$_("#0070FF"),gap:4,rotation:t,strokeWidth:s,fillOpacity:0,width:i,height:a}),p.new(this._root,{color:f.$_("#FFFF00"),gap:4,rotation:t,strokeWidth:s,fillOpacity:0,width:i,height:a}),p.new(this._root,{color:f.$_("#FFAA00"),gap:4,rotation:t,strokeWidth:s,fillOpacity:0,width:i,height:a}),p.new(this._root,{color:f.$_("#FF0000"),gap:4,rotation:t,strokeWidth:s,fillOpacity:0,width:i,height:a}),p.new(this._root,{color:f.$_("#00734C"),gap:4,rotation:t,strokeWidth:s,fillOpacity:0,width:i,height:a})],this.currentPattern=0,this.rule("Slice").setAll({fillOpacity:0}),this.rule("Slice").setup=function(t){var s;t.set("fillPattern",e.patterns[e.currentPattern]),e.currentPattern++,e.currentPattern===(null===(s=e.patterns)||void 0===s?void 0:s.length)&&(e.currentPattern=0)}}}t=T,n.S6(c.i_.rootElements,(function(e){e.dom.id===t&&e.dispose()}));var i=g.f.new(T);i.container.children.clear(),null===(e=i._logo)||void 0===e||e.dispose(),i.setThemes([w.Z.new(i),_.Z.new(i),s.new(i)]);var d=i.container.children.push(y.u.new(i,{y:m.aQ(-25),layout:i.horizontalLayout}));S.current=d;var u=d.series.push(b.f.new(i,{name:"Series",categoryField:"category",valueField:"value",legendValueText:"{valuePercentTotal.formatNumber('#.')}% ({value})",radius:m.aQ(45),innerRadius:m.aQ(20),marginBottom:-10}));k.current=u,d.series.push(u),u.slices.template.setAll({fillOpacity:0,stroke:f.$_("#ffffff"),strokeWidth:.7,strokeOpacity:1,templateField:"sliceSettings"}),u.labels.template.set("visible",!1),u.ticks.template.set("visible",!1),u.slices.template.events.on("click",(e=>{var t;const s=(null===(t=e.target.dataItem)||void 0===t?void 0:t.dataContext).category,i=x.Yz.find((e=>e.category===s)),n=null===i||void 0===i?void 0:i.value;var c,h=a.UC.createQuery();r.ei.when((function(){r.ei.whenLayerView(a.UC).then((e=>{a.UC.queryFeatures(h).then((t=>{const s=t.features.length;let i=[];for(var n=0;n<s;n++){var h=t.features[n].attributes.OBJECTID;i.push(h)}var d=new o.Z({objectIds:i});a.UC.queryExtent(d).then((function(e){e.extent&&r.ei.goTo(e.extent)})),c&&c.remove(),c=e.highlight(i),r.ei.on("click",(function(){e.filter=new l.Z({where:void 0}),c.remove()}))})),e.filter=new l.Z({where:"Status = "+n})}))}))})),u.data.setAll(A);var j=i.container.children.push(v.D.new(i,{centerX:m.aQ(50),x:m.aQ(50),y:m.aQ(48),layout:i.verticalLayout}));N.current=j,j.data.setAll(u.dataItems),j.markers.template.setAll({width:18,height:18}),j.markerRectangles.template.setAll({cornerRadiusTL:10,cornerRadiusTR:10,cornerRadiusBL:10,cornerRadiusBR:10}),d.onPrivate("width",(function(e){var t=Math.max(e-d.height()-190,190);j.labels.template.setAll({width:t,maxWidth:t})}));return j.labels.template.setAll({oversizedBehavior:"truncate",fill:f.$_("#ffffff")}),j.valueLabels.template.setAll({textAlign:"right",width:50,fill:f.$_("#ffffff")}),j.itemContainers.template.setAll({paddingTop:1.1,paddingBottom:2}),u.appear(1e3,100),()=>{i.dispose()}}),[T,A]),(0,i.useEffect)((()=>{var e,t;null===(e=k.current)||void 0===e||e.data.setAll(A),null===(t=N.current)||void 0===t||t.data.setAll(k.current.dataItems)})),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"lotNumberImage",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"totalStructuresLabel",children:"TOTAL STRUCTURES "}),(0,j.jsx)("br",{}),(0,j.jsx)("br",{}),(0,j.jsxs)("b",{className:"totalLotsNumber",children:[(0,x.oc)(D[3])," ",(0,j.jsxs)("div",{className:"totalLotsNumber2",children:["(",(0,x.oc)(D[2]),")"]})," "]})]}),(0,j.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/House_Logo.svg",alt:"Structure Logo",height:"19%",width:"19%",style:{padding:"10px",margin:"auto"}})]}),(0,j.jsx)("div",{id:T,style:{height:"45vh",backgroundColor:"rgb(0,0,0,0)",color:"white",marginBottom:"-4.5vh"}}),(0,j.jsxs)("div",{className:"structureNumberImage",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"totalStructuresLabel",children:"DEMOLISHED"}),(0,j.jsx)("br",{}),(0,j.jsx)("br",{}),0===D[1]?(0,j.jsxs)("b",{className:"DemolishedNumber",children:[D[0],"% (0)"]}):(0,j.jsxs)("b",{className:"DemolishedNumber",children:[D[0],"% (",(0,x.oc)(D[1]),")"]})]}),(0,j.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/Structure_Demolished.svg",alt:"Structure Logo",height:"18%",width:"18%",style:{padding:"10px",margin:"auto"}})]})]})}))}}]);
//# sourceMappingURL=1818.1413db95.chunk.js.map