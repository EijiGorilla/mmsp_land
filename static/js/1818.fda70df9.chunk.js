"use strict";(self.webpackChunkmmsp_land=self.webpackChunkmmsp_land||[]).push([[1818],{31818:(e,t,i)=>{i.r(t),i.d(t,{default:()=>T});var s=i(72791),a=i(28979),r=i(8889),l=i(18661),o=i(21149),n=i(36801),h=i(59181),c=i(85113),u=i(86471),d=i(66683);class f extends u.c{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("width",100),t=this.get("height",100),i=this.get("gap",0),s=this.get("strokeWidth",1);if(i){let a=i+s,r=t/a;for(let t=-r;t<2*r;t++){const i=Math.round(t*a-a/2)+.5;this._display.moveTo(-e,i),this._display.lineTo(2*e,i)}}else this._display.moveTo(0,0),this._display.lineTo(e,0);this._display.lineStyle(s,this.get("color"),this.get("colorOpacity"));let a=this.get("strokeDasharray");d.hj(a)&&(a=a<.5?[0]:[a]),this._display.setLineDash(a);const r=this.get("strokeDashoffset");r&&this._display.setLineDashOffset(r),this._display.endStroke()}}Object.defineProperty(f,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinePattern"}),Object.defineProperty(f,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.c.classNames.concat([f.className])});var p=i(66817),g=i(36061),m=i(70565),v=i(54797),y=i(27663),w=i(82308),b=i(80659),_=i(91934),x=i(44520),k=i(85580),S=i(80184);const T=(0,s.memo)((e=>{let{contractp:t,landtype:i,landsection:u,typelist:d}=e;const T=(0,s.useRef)({}),j=(0,s.useRef)({}),L=(0,s.useRef)({}),[A,D]=(0,s.useState)([{category:String,value:Number}]),R="structure-chart",[N,O]=(0,s.useState)([]),C=((0,s.useRef)({}),(0,s.useRef)({}),(0,s.useRef)({}),"Package = '"+t+"'"),F=C+" AND "+("Type = '"+i+"'"),E=F+" AND "+("Station1 ='"+u+"'");return a.UC.definitionExpression=t?!t||i||u?t&&i&&!u?F:E:C:"1=1",(0,s.useEffect)((()=>{(0,x.KD)().then((e=>{D(e)})),(0,x.fT)().then((e=>{O(e)}))}),[t,i,u]),(0,s.useEffect)((()=>{var e,t;class i extends c.Q{constructor(){super(...arguments),this.patterns=void 0,this.currentPattern=void 0}setupDefaultRules(){var e=this;const t=135,i=1.1,s=10,a=10;this.patterns=[f.new(this._root,{color:p.$_("#70AD47"),gap:4,rotation:t,strokeWidth:i,fillOpacity:0,width:s,height:a}),f.new(this._root,{color:p.$_("#0070FF"),gap:4,rotation:t,strokeWidth:i,fillOpacity:0,width:s,height:a}),f.new(this._root,{color:p.$_("#FFFF00"),gap:4,rotation:t,strokeWidth:i,fillOpacity:0,width:s,height:a}),f.new(this._root,{color:p.$_("#FFAA00"),gap:4,rotation:t,strokeWidth:i,fillOpacity:0,width:s,height:a}),f.new(this._root,{color:p.$_("#FF0000"),gap:4,rotation:t,strokeWidth:i,fillOpacity:0,width:s,height:a}),f.new(this._root,{color:p.$_("#00734C"),gap:4,rotation:t,strokeWidth:i,fillOpacity:0,width:s,height:a})],this.currentPattern=0,this.rule("Slice").setAll({fillOpacity:0}),this.rule("Slice").setup=function(t){var i;t.set("fillPattern",e.patterns[e.currentPattern]),e.currentPattern++,e.currentPattern===(null===(i=e.patterns)||void 0===i?void 0:i.length)&&(e.currentPattern=0)}}}t=R,n.S6(h.i_.rootElements,(function(e){e.dom.id===t&&e.dispose()}));var s=g.f.new(R);s.container.children.clear(),null===(e=s._logo)||void 0===e||e.dispose(),s.setThemes([b.Z.new(s),_.Z.new(s),i.new(s)]);var u=s.container.children.push(y.u.new(s,{y:m.aQ(-25),layout:s.horizontalLayout}));L.current=u;var d=u.series.push(w.f.new(s,{name:"Series",categoryField:"category",valueField:"value",legendValueText:"{valuePercentTotal.formatNumber('#.')}% ({value})",radius:m.aQ(45),innerRadius:m.aQ(20),marginBottom:-10}));T.current=d,u.series.push(d),d.slices.template.setAll({fillOpacity:0,stroke:p.$_("#ffffff"),strokeWidth:.7,strokeOpacity:1,templateField:"sliceSettings"}),d.labels.template.set("visible",!1),d.ticks.template.set("visible",!1),d.slices.template.events.on("click",(e=>{var t;const i=(null===(t=e.target.dataItem)||void 0===t?void 0:t.dataContext).category,s=x.Yz.find((e=>e.category===i)),n=null===s||void 0===s?void 0:s.value;var h,c=a.UC.createQuery();r.ei.when((function(){r.ei.whenLayerView(a.UC).then((e=>{a.UC.queryFeatures(c).then((t=>{const i=t.features.length;let s=[];for(var n=0;n<i;n++){var c=t.features[n].attributes.OBJECTID;s.push(c)}var u=new o.Z({objectIds:s});a.UC.queryExtent(u).then((function(e){e.extent&&r.ei.goTo(e.extent)})),h&&h.remove(),h=e.highlight(s),r.ei.on("click",(function(){e.filter=new l.Z({where:void 0}),h.remove()}))})),e.filter=new l.Z({where:"Status = "+n})}))}))})),d.data.setAll(A);var k=s.container.children.push(v.D.new(s,{centerX:m.aQ(50),x:m.aQ(50),y:m.aQ(48),layout:s.verticalLayout}));j.current=k,k.data.setAll(d.dataItems),k.markers.template.setAll({width:18,height:18}),k.markerRectangles.template.setAll({cornerRadiusTL:10,cornerRadiusTR:10,cornerRadiusBL:10,cornerRadiusBR:10}),u.onPrivate("width",(function(e){var t=Math.max(e-u.height()-190,190);k.labels.template.setAll({width:t,maxWidth:t})}));return k.labels.template.setAll({oversizedBehavior:"truncate",fill:p.$_("#ffffff")}),k.valueLabels.template.setAll({textAlign:"right",width:50,fill:p.$_("#ffffff")}),k.itemContainers.template.setAll({paddingTop:1.1,paddingBottom:2}),d.appear(1e3,100),()=>{s.dispose()}}),[R,A]),(0,s.useEffect)((()=>{var e,t;null===(e=T.current)||void 0===e||e.data.setAll(A),null===(t=j.current)||void 0===t||t.data.setAll(T.current.dataItems)})),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(k.ZK,{children:"TOTAL STRUCTURES"}),(0,S.jsx)(k.ZK,{layout:"inline",children:(0,S.jsxs)("b",{className:"totalLotsNumber",children:[(0,x.oc)(N[3]),(0,S.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/House_Logo.svg",alt:"Structure Logo",height:"35%",width:"35%",style:{marginLeft:"155%",display:"flex",marginTop:"-25%"}}),(0,S.jsxs)("div",{className:"totalLotsNumber2",children:["(",(0,x.oc)(N[2]),")"]})," "]})}),(0,S.jsx)("div",{id:R,style:{height:"45vh",backgroundColor:"rgb(0,0,0,0)",color:"white",marginBottom:"-4.5vh"}}),(0,S.jsx)(k.ZK,{children:"DEMOLISHED"}),(0,S.jsx)(k.ZK,{layout:"inline",children:0===N[1]?(0,S.jsxs)("b",{className:"DemolishedNumber",children:[N[0],"% (0)",(0,S.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/Structure_Demolished.svg",alt:"Structure Logo",height:"15%",width:"15%",style:{marginLeft:"70%",display:"flex",marginTop:"-10%"}})]}):(0,S.jsxs)("b",{className:"DemolishedNumber",children:[N[0],"% (",(0,x.oc)(N[1]),")",(0,S.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/Structure_Demolished.svg",alt:"Structure Logo",height:"18%",width:"18%",style:{marginLeft:"70%",display:"flex",marginTop:"-10%"}})]})})]})}))}}]);
//# sourceMappingURL=1818.fda70df9.chunk.js.map