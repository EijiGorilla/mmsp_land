"use strict";(self.webpackChunkmmsp_land=self.webpackChunkmmsp_land||[]).push([[5343],{5343:(e,t,l)=>{l.r(t),l.d(t,{default:()=>x});var a=l(72791),i=l(28979),s=l(8889),r=l(18661),n=l(21149),o=l(36801),c=l(59181),u=l(66817),d=l(36061),f=l(70565),h=l(54797),m=l(27663),p=l(82308),v=l(80659),g=l(91934),w=l(44520),y=l(85580),b=l(80184);const x=(0,a.memo)((e=>{let{contractp:t,landtype:l,landsection:x}=e;const A=(0,a.useRef)({}),k=(0,a.useRef)({}),T=(0,a.useRef)({}),[j,L]=(0,a.useState)([{category:String,value:Number,sliceSettings:{fill:u.$_("#00c5ff")}}]),[R,N]=(0,a.useState)(),S="isf-pie",E="Package = '"+t+"'",_=E+" AND "+("Type = '"+l+"'"),O=_+" AND "+("Station1 ='"+x+"'");return i.jl.definitionExpression=t?!t||l||x?t&&l&&!x?_:O:E:"1=1",(0,a.useEffect)((()=>{(0,w.o6)().then((e=>{L(e)})),(0,w.nN)().then((e=>{N(e)}))}),[t,l,x]),(0,a.useEffect)((()=>{var e,t;t=S,o.S6(c.i_.rootElements,(function(e){e.dom.id===t&&e.dispose()}));var l=d.f.new(S);l.container.children.clear(),null===(e=l._logo)||void 0===e||e.dispose(),l.setThemes([v.Z.new(l),g.Z.new(l)]);var a=l.container.children.push(m.u.new(l,{layout:l.verticalLayout}));T.current=a;var w=a.series.push(p.f.new(l,{name:"Series",categoryField:"category",valueField:"value",legendValueText:"{valuePercentTotal.formatNumber('#.')}% ({value})",radius:f.aQ(45),innerRadius:f.aQ(20),scale:1.8}));A.current=w,a.series.push(w),w.slices.template.setAll({fillOpacity:.9,stroke:u.$_("#ffffff"),strokeWidth:.5,strokeOpacity:1,templateField:"sliceSettings"}),w.labels.template.set("visible",!1),w.ticks.template.set("visible",!1),w.slices.template.events.on("click",(e=>{var t;const l=(null===(t=e.target.dataItem)||void 0===t?void 0:t.dataContext).category;var a,o=i.jl.createQuery();s.ei.when((function(){s.ei.whenLayerView(i.jl).then((e=>{i.jl.queryFeatures(o).then((function(t){const l=t.features.length;let o=[];for(var c=0;c<l;c++){var u=t.features[c].attributes.OBJECTID;o.push(u)}var d=new n.Z({objectIds:o});i.jl.queryExtent(d).then((function(e){e.extent&&s.ei.goTo(e.extent)})),a&&a.remove(),a=e.highlight(o),s.ei.on("click",(function(){e.filter=new r.Z({where:void 0}),a.remove()}))})),e.filter=new r.Z({where:"RELOCATION = '"+l+"'"})}))}))})),w.data.setAll(j);var y=a.children.push(h.D.new(l,{centerX:f.aQ(50),x:f.aQ(50)}));k.current=y,y.data.setAll(w.dataItems),y.markers.template.setAll({width:18,height:18}),y.markerRectangles.template.setAll({cornerRadiusTL:10,cornerRadiusTR:10,cornerRadiusBL:10,cornerRadiusBR:10}),a.onPrivate("width",(function(e){var t=Math.max(e-a.height()-190,190);y.labels.template.setAll({width:t,maxWidth:t})}));return y.labels.template.setAll({oversizedBehavior:"truncate",fill:u.$_("#ffffff")}),y.valueLabels.template.setAll({textAlign:"right",width:50,fill:u.$_("#ffffff")}),y.itemContainers.template.setAll({paddingTop:5,paddingBottom:1}),w.appear(1e3,100),()=>{l.dispose()}}),[S,j]),(0,a.useEffect)((()=>{var e,t;null===(e=A.current)||void 0===e||e.data.setAll(j),null===(t=k.current)||void 0===t||t.data.setAll(A.current.dataItems)})),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.ZK,{children:"TOTAL ISF"}),(0,b.jsx)(y.ZK,{layout:"inline",children:(0,b.jsxs)("b",{className:"isfTotalNumber",children:[(0,w.oc)(R),(0,b.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/NLO_Logo.svg",alt:"NLO Logo",height:"60%",width:"60%",style:{marginLeft:"250%",display:"flex",marginTop:"-35%"}})]})}),(0,b.jsx)("div",{id:S,style:{height:"35vh",backgroundColor:"rgb(0,0,0,0)",color:"white"}})]})}))}}]);
//# sourceMappingURL=5343.708d5d2c.chunk.js.map